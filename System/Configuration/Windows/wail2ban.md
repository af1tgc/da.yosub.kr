---
title: wail2ban
description: 
published: true
date: 2023-03-15T08:03:11.275Z
tags: system, windows, security
editor: markdown
dateCreated: 2023-03-15T08:01:51.466Z
---

# wail2ban

![untitled.png](/untitled.png)

## 1. ê°œìš”

wail2banì€ fail2banì˜ ê¸°ë³¸ ê¸°ëŠ¥ê³¼ ts_blockì˜ ìš”ì†Œë¥¼ ê²°í•©í•œ Windows ë°©í™”ë²½ì´ë‹¤. 
ì´ëŠ” ì•Œë ¤ì§„ Event IDë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹¤íŒ¨í•œ ì¸ë°”ìš´ë“œ ì—‘ì„¸ìŠ¤ë¥¼ ì¼ì • ì‹œê°„ë™ì•ˆ~~1ì°¨ 300ì´ˆ, 2ì°¨ 1500ì´ˆâ€¦~~ ì°¨ë‹¨í•˜ëŠ” ì„ì‹œ ë°©í™”ë²½ ê·œì¹™ì„ ìë™ ìƒì„±í•œë‹¤ê³  í•œë‹¤.

- RDP(ì›ê²©ë°ìŠ¤í¬íƒ‘)ê³¼ ê°™ì€ ì„œë¹„ìŠ¤ì— ëŒ€í•˜ì—¬ Brute-force Attack(ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©)ì„ ìœ ìš©í•˜ê²Œ ë°©ì–´í•  ìˆ˜ ìˆë‹¤.
- PowerShell ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‘ì„±ë˜ì–´ ìˆë‹¤.
- ì €ì‘ì(Attribution)ëŠ” Kaite McLaughlinì´ë©°, ë¼ì´ì„¼ìŠ¤(License)ëŠ” BSD 3-Clause Licenseë¥¼ ë”°ë¥¸ë‹¤.

wail2banì€ [https://github.com/glasnt/wail2ban](https://github.com/glasnt/wail2ban)ì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì„ ìˆ˜ ìˆë‹¤.

<br>

## 2. ì„¤ì¹˜

1.  C:\scripts\wail2ban í´ë” ìƒì„± í›„, [Github Repository](https://github.com/glasnt/wail2ban) ë‚´ íŒŒì¼ì„ ì €ì¥í•œë‹¤.
2.  ì‘ì—…ìŠ¤ì¼€ì¥´ëŸ¬(Task Scheduler)ì— onstartup.xmlì„ ì„í¬íŠ¸í•œë‹¤.
3.  start_wail2ban.bat íŒŒì¼ì„ ì‹¤í–‰í•œë‹¤.

<br>

## 3. ë™ì‘

ì¼ë°˜ì ìœ¼ë¡œ RDP ë³´ì•ˆì€ VPN ì‚¬ìš© í˜¹ì€ ê¸°ë³¸ í¬íŠ¸ ë³€ê²½ì„ ê¶Œì¥í•˜ë‚˜, ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì—ì„œì˜ ë³´ì•ˆì¥ë¹„ê°€ ì—†ê³  ì–´ë””ì„œë‚˜ ì›ê²©ì—°ê²°ì´ í•„ìš”í•œ ì‚¬ìš©ìëŠ” wail2ban ì‚¬ìš©ì„ ì ê·¹ ê³ ë ¤í•˜ëŠ” í¸ì´ ì¢‹ì•„ë³´ì¸ë‹¤. ~~ì•„ë¬´ë¦¬ ê¸°ë³¸ í¬íŠ¸ë¥¼ ë³€ê²½í•œë‹¤ê³ í•´ì„œ 100% ì•ˆì „í•œ ê²ƒì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì—~~

ì›ê²© ë°ìŠ¤í¬í†± ì—°ê²° ì‚¬ìš©ì„ í•˜ë‹¤ë³´ë©´ ì•„ë¬´ë¦¬ í¬íŠ¸(3389 to x)ë¥¼ ë³€ê²½í•˜ì—¬ ì‚¬ìš©í•˜ë”ë¼ë„ ì–´ëŠìˆœê°„ 1~2ì´ˆ ë‹¨ìœ„ë¡œ ì ‘ì†ì‹œë„ 
ë¡œê·¸ê°€ ê¸°ë¡ëœë‹¤. 
ì›ê²© ë°ìŠ¤í¬í†± ì—°ê²° ì‹œë„ ë¡œê·¸ëŠ” `[ì‘ìš© í”„ë¡œê·¸ë¨ ë° ì„œë¹„ìŠ¤ ë¡œê·¸ > Microsoft > Windows > TerminalServices-RemoteConnectionManager > Operational]` ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©° ìœ„ì™€ ê°™ì€ ë¡œê·¸ë¥¼ ì§ë©´í•˜ê²Œ ë˜ë©´ ì‚¬ìš©ìëŠ” ê³µí¬ì‹¬ì— íœ©ì‹¸ì´ê²Œë  ê°€ëŠ¥ì„±ì´ ë†í›„í•˜ë‹¤.
ë¬¼ë¡  `[TerminalService-LocalSessionManager > Operational]`ì— ì„±ê³µ ì„¸ì…˜ ê¸°ë¡ì„ í™•ì¸í•´ ì¹¨í•´ë¥¼ ë‹¹í•˜ì§€ ì•Šì•˜ìŒì„ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ, ê°€ëŠ¥ì„± ì¡°ì°¨ ë§‰ì•„ì£¼ëŠ” ê²ƒì´ ë°ì´í„°ë¥¼ ì§€í‚¤ëŠ” ì²« ê±¸ìŒì„ì„ ëª…ì‹¬í•˜ì.

wail2banì„ ì‚¬ìš©í•˜ë©´ ìœ„ì™€ ê°™ì€ ìƒí™©ì„ ë¯¸ì—°ì— ë°©ì§€í•  ìˆ˜ ìˆë‹¤. ì •í•´ì§„ ê·œì¹™ì— ë”°ë¼ ì‹¤íŒ¨ ê°ì‚¬ê°€ ëª‡ íšŒì´ìƒ ê¸°ë¡ë˜ë©´ ìë™ìœ¼ë¡œ ìœˆë„ìš° ë°©í™”ë²½ ê·œì¹™ì— ë“±ë¡ëœë‹¤. 
ë¬¼ë¡  Expire Timeì´ í•¨ê»˜ ì ìš©ë˜ë¯€ë¡œ ë¶ˆì•ˆí•˜ë‹¤ë©´ DEBUG Logë‚´ IPë¥¼ `[ë°©í™”ë²½ > ê³ ê¸‰ì„¤ì • > ì¸ë°”ìš´ë“œ ê·œì¹™]`ì—ì„œ ì˜êµ¬ ì°¨ë‹¨í•˜ë„ë¡ í•˜ì.

ë§Œì•½ ì‚¬ìš©ìê°€ ì‹¤ìˆ˜ë¡œ ì •ì±…ì— ê±¸ë ¸ë‹¤ë©´ ~~ì •ë§ ê·¹íˆ ë“œë¬¸ ê²½ìš°ë‹¤. í‹€ë¦¬ê³  ë˜, í‹€ë¦¬ê³  ê¸ˆë¶•ì–´ì¸ê°€~~ ë¡œì»¬ ë¡œê·¸ì¸ í›„ `[ë°©í™”ë²½ > ê³ ê¸‰ì„¤ì • > ì¸ë°”ìš´ë“œ ê·œì¹™]`ì—ì„œ ê°„ë‹¨í•˜ê²Œ ê·œì¹™ì„ ì‚­ì œí•´ì£¼ë©´ ëœë‹¤.
ë˜í•œ, wail2banì„ ë”ì´ìƒ ì‚¬ìš©í•˜ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ ì‘ì—…ìŠ¤ì¼€ì¥´ëŸ¬(Task Scheduler)ì—ì„œ onstartup.xmlì„ ì‚­ì œí•˜ë©´ëœë‹¤.

<br>

## 4. ì—¬ë‹´

- ë¬¼ë¡  íŒ¨ìŠ¤ì›Œë“œëŠ” 3ê°€ì§€ ì¡°í•© 25ìë¦¬ ì´ìƒ ì‚¬ìš©í•˜ë„ë¡í•˜ì. ğŸ¤£
    
- RDP ì ‘ì†ì— ëŒ€í•œ ê°ì‚¬ ì‹¤íŒ¨ ë¡œê·¸ëŠ” `[Windows ë¡œê·¸ > ë³´ì•ˆ]`ì— ë‚¨ëŠ”ë‹¤. ì—¬ê¸°ì„œ ì›ê²©ì§€ ì ‘ì† ì‹œë„ IPë¥¼ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìˆ˜ë™ìœ¼ë¡œ ì°¨ë‹¨í•˜ë ¤ë©´ í•´ë‹¹ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì! `(Event ID : 4625)`